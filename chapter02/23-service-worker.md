## 2.2 离线缓存

App Shell 的快速呈现，依赖于对部分文件的本地缓存，前面大家将站点 App Shell （用户界面所需最小的 HTML、CSS 和 JavaScript文件）的部分都开发完毕后，我们这里就要思考怎么将这些文件缓存在本地了。原本 HTML5 为 Web 应用专门提供了一个应用程序缓存机制方法 —— AppCache，但是由于该接口设计上存在一定的缺陷，未能普及开来，现在随时可能被停用删除，那取而代之的就是今天要隆重介绍的 Service Workers。它的出现让 Web 应用离线访问成为可能，让 Web 开发者们如获至宝，接下来我们尝试利用它来让站点实现离线缓存。

### 2.2.1 Service Worker

Service worker是一个注册在指定源和路径下的事件驱动 worker。它可以关联页面或者网站，拦截并修改访问和资源请求，细粒度地缓存资源，你可以根据不同的情形采用指定的缓存策略，让网站交互更友好。同时，出于网络安全的考虑，页面及网站请求都要求是 HTTPS 承载。在前面一个章节我们也简单介绍了相关的原理及生命周期，这里直接进入开发了


### 2.2.2 开发及常用的工具

service worker 需要经过注册，安装，激活才能接管指定的页面或网站，才能对接管页面及网站的请求进行拦截并处理。这里需要注意的是，Service Worker 只能拦截其注册文件所在目录及子目录下的页面的请求

- 原生写法

- sw-precache

- sw-toolbox

- workbox

### 2.2.3 SW 开发